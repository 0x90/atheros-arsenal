* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
Experiment:
	"rhapsody_ani=off_rtc-30dBm"
	Minstrel channel coherence based rate control

Setup:
	Two PCEngines Alix nodes set up on a table, one as AP
	and the other one acting as a station where the AP is sending iperf
	traffic to the STA. (download scenario).

	iperf		iperf
	sending ----->	receiving
	[ ap ]		[ sta ]

	The measurement invovles multiple packet sizes (1500) for both
	TCP and UDP. For each packet size, TCP transmits 500MB while UDP
	packets are sent with multiple packet rates (50 200 600 1200 pkt/s)
	for the duration of 240 s.

		AP		sta
	lan	10.1.0.1		10.1.0.2
	wifi	10.10.0.1	10.10.0.2

	In this setup, we simulate changes to the channel by using a Vaunix
	Lab Brick Digital Attenuator and alternating between +0
	and +30 dBm attenuation.

	The channel coherence time (= time between attenuation switches) is
	measured for each of the following durations:
	20000 50 100 1000
	We perform 1 runs for each interval setting.

Time:
	2015/05/25 23:02:20

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

23:02:20: copying files ...
23:02:20: copying files/add_monitor.sh to 10.1.0.1:/usr/sbin/add_monitor
23:02:24: copying files/measurement.sh to 10.1.0.1:/etc/init.d/
23:02:27: copying files/measurement.sh to 10.1.0.1:/usr/sbin/measurement
23:02:31: copying files/ani to 10.1.0.1:/usr/sbin/ani
23:02:35: copying files/netcat-trace-server to 10.1.0.1:/etc/init.d/
23:02:38: copying files/add_monitor.sh to 10.1.0.2:/usr/sbin/add_monitor
23:02:42: copying files/measurement.sh to 10.1.0.2:/etc/init.d/
23:02:45: copying files/measurement.sh to 10.1.0.2:/usr/sbin/measurement
23:02:49: copying files/ani to 10.1.0.2:/usr/sbin/ani
23:02:52: copying files/netcat-trace-server to 10.1.0.2:/etc/init.d/
23:02:56: setting up monitor interfaces ...
23:02:56: ssh on 10.1.0.2: add_monitor
creating monitor interface mon0
23:02:59: ssh on 10.1.0.1: add_monitor
creating monitor interface mon0
23:03:03: starting experiment ...
23:03:03: [ OK ] creating directory './traces//rhapsody_ani=off_rtc'
23:03:03: turning ANI off
23:03:03: ssh on 10.1.0.2: ani 0
23:03:06: ssh on 10.1.0.1: ani 0
23:03:15: --- measuring TCP ---
23:03:15: stopping all previous iperf instances
23:03:15: ssh on 10.1.0.1: killall iperf 2>/dev/null
23:03:19: ssh on 10.1.0.2: killall iperf 2>/dev/null
23:03:22: stopping all previous iperf instances
23:03:22: ssh on 10.1.0.1: /etc/init.d/netcat-trace-server restart 10
Starting netcat server on port 8000 ...
Starting netcat server on port 8001 ...
Starting netcat server on port 8002 ...
Starting netcat server on port 8003 ...
Starting netcat server on port 8004 ...
Starting netcat server on port 8005 ...
Starting netcat server on port 8006 ...
Starting netcat server on port 8007 ...
Starting netcat server on port 8008 ...
Starting netcat server on port 8009 ...
23:03:26: ssh on 10.1.0.2: /etc/init.d/netcat-trace-server restart 10
Starting netcat server on port 8000 ...
Starting netcat server on port 8001 ...
Starting netcat server on port 8002 ...
Starting netcat server on port 8003 ...
Starting netcat server on port 8004 ...
Starting netcat server on port 8005 ...
Starting netcat server on port 8006 ...
Starting netcat server on port 8007 ...
Starting netcat server on port 8008 ...
Starting netcat server on port 8009 ...
23:03:34: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_ATT=30" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:03:36: [ OK ] preparing attenuator log file
23:03:36: # sudo ./attenuator_lab_brick -r ms -f ./wf_att.csv -l ./attenuator/attenuator_proto=tcp_cct=20000.log
23:03:36: starting attenuation: 0 <-> 30, PID: 26214
23:03:41: starting TCP iperf server on 10.1.0.2
23:03:41: restarting wifi on 10.1.0.2 ...
23:03:41: nc on 10.1.0.2:8001: /usr/bin/iperf -s -p 12000; exit
23:03:41: nc on 10.1.0.2:8002: wifi; exit
------------------------------------------------------------
Server listening on TCP port 12000
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
23:04:02: nc on 10.1.0.2:8009: add_monitor; exit
creating monitor interface mon0
23:04:03: == Round 1: round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1
23:04:03: ssh on 10.1.0.1: /etc/init.d/measurement.sh start round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1
starting traces for round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1... done
23:04:07: ssh on 10.1.0.2: /etc/init.d/measurement.sh start round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1
starting traces for round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1... done
23:04:16: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:04:20: iperf: starting on AP
23:04:20: nc on 10.1.0.1:8004: touch /tmp/iperf.lock; iperf -c 10.10.0.2 -p 12000 -n 500MB; rm /tmp/iperf.lock; exit
------------------------------------------------------------
Client connecting to 10.10.0.2, TCP port 12000
TCP window size: 43.8 KByte (default)
------------------------------------------------------------
[  4] local 10.10.0.1 port 46511 connected with 10.10.0.2 port 12000
[  5] local 10.10.0.2 port 12000 connected with 10.10.0.1 port 46511
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-174.4 sec   500 MBytes  24.0 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-174.6 sec   500 MBytes  24.0 Mbits/sec
23:07:15: iperf: client done on AP
23:07:15: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "STOP_round=1_proto=tcp_size=1500_data=500MB_cct=20000_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:07:17: ssh on 10.1.0.1: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:07:22: ssh on 10.1.0.2: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:07:26: stopping all iperf instances ...
23:07:26: nc on 10.1.0.2:8007: killall iperf 2>/dev/null; exit
23:07:27: nc on 10.1.0.1:8007: killall iperf 2>/dev/null; exit
23:07:28: collecting traces ...
23:08:00: [ OK ] terminating Attenuator control (26214)
23:08:00: [ OK ] copying attenuator log file to traces
23:08:25: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_ATT=30" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:08:27: [ OK ] preparing attenuator log file
23:08:27: # sudo ./attenuator_lab_brick -r ms -f ./wf_att.csv -l ./attenuator/attenuator_proto=tcp_cct=50.log
23:08:27: starting attenuation: 0 <-> 30, PID: 26551
23:08:32: starting TCP iperf server on 10.1.0.2
23:08:32: restarting wifi on 10.1.0.2 ...
23:08:32: nc on 10.1.0.2:8001: /usr/bin/iperf -s -p 12000; exit
23:08:32: nc on 10.1.0.2:8002: wifi; exit
------------------------------------------------------------
Server listening on TCP port 12000
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
23:08:54: nc on 10.1.0.2:8009: add_monitor; exit
creating monitor interface mon0
23:08:55: == Round 2: round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1
23:08:55: ssh on 10.1.0.1: /etc/init.d/measurement.sh start round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1
starting traces for round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1... done
23:08:58: ssh on 10.1.0.2: /etc/init.d/measurement.sh start round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1
starting traces for round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1... done
23:09:07: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:09:11: iperf: starting on AP
23:09:11: nc on 10.1.0.1:8004: touch /tmp/iperf.lock; iperf -c 10.10.0.2 -p 12000 -n 500MB; rm /tmp/iperf.lock; exit
------------------------------------------------------------
Client connecting to 10.10.0.2, TCP port 12000
TCP window size: 43.8 KByte (default)
------------------------------------------------------------
[  4] local 10.10.0.1 port 46512 connected with 10.10.0.2 port 12000
[  5] local 10.10.0.2 port 12000 connected with 10.10.0.1 port 46512
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-392.7 sec   500 MBytes  10.7 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-393.3 sec   500 MBytes  10.7 Mbits/sec
23:15:45: iperf: client done on AP
23:15:45: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "STOP_round=2_proto=tcp_size=1500_data=500MB_cct=50_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:15:47: ssh on 10.1.0.1: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:15:51: ssh on 10.1.0.2: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:15:55: stopping all iperf instances ...
23:15:55: nc on 10.1.0.2:8007: killall iperf 2>/dev/null; exit
23:15:56: nc on 10.1.0.1:8007: killall iperf 2>/dev/null; exit
23:15:57: collecting traces ...
23:16:36: [ OK ] terminating Attenuator control (26551)
23:16:36: [ OK ] copying attenuator log file to traces
23:17:01: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_ATT=30" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:17:03: [ OK ] preparing attenuator log file
23:17:03: # sudo ./attenuator_lab_brick -r ms -f ./wf_att.csv -l ./attenuator/attenuator_proto=tcp_cct=100.log
23:17:03: starting attenuation: 0 <-> 30, PID: 27150
23:17:08: starting TCP iperf server on 10.1.0.2
23:17:08: restarting wifi on 10.1.0.2 ...
23:17:08: nc on 10.1.0.2:8001: /usr/bin/iperf -s -p 12000; exit
23:17:08: nc on 10.1.0.2:8002: wifi; exit
------------------------------------------------------------
Server listening on TCP port 12000
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
23:17:30: nc on 10.1.0.2:8009: add_monitor; exit
creating monitor interface mon0
23:17:31: == Round 3: round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1
23:17:31: ssh on 10.1.0.1: /etc/init.d/measurement.sh start round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1
starting traces for round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1... done
23:17:34: ssh on 10.1.0.2: /etc/init.d/measurement.sh start round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1
starting traces for round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1... done
23:17:43: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:17:47: iperf: starting on AP
23:17:47: nc on 10.1.0.1:8004: touch /tmp/iperf.lock; iperf -c 10.10.0.2 -p 12000 -n 500MB; rm /tmp/iperf.lock; exit
------------------------------------------------------------
Client connecting to 10.10.0.2, TCP port 12000
TCP window size: 43.8 KByte (default)
------------------------------------------------------------
[  4] local 10.10.0.1 port 46513 connected with 10.10.0.2 port 12000
[  5] local 10.10.0.2 port 12000 connected with 10.10.0.1 port 46513
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-388.5 sec   500 MBytes  10.8 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-388.9 sec   500 MBytes  10.8 Mbits/sec
23:24:17: iperf: client done on AP
23:24:17: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "STOP_round=3_proto=tcp_size=1500_data=500MB_cct=100_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:24:20: ssh on 10.1.0.1: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:24:24: ssh on 10.1.0.2: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:24:28: stopping all iperf instances ...
23:24:28: nc on 10.1.0.2:8007: killall iperf 2>/dev/null; exit
23:24:29: nc on 10.1.0.1:8007: killall iperf 2>/dev/null; exit
23:24:30: collecting traces ...
23:25:09: [ OK ] terminating Attenuator control (27150)
23:25:09: [ OK ] copying attenuator log file to traces
23:25:34: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_ATT=30" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:25:36: [ OK ] preparing attenuator log file
23:25:36: # sudo ./attenuator_lab_brick -r ms -f ./wf_att.csv -l ./attenuator/attenuator_proto=tcp_cct=1000.log
23:25:36: starting attenuation: 0 <-> 30, PID: 27764
23:25:41: starting TCP iperf server on 10.1.0.2
23:25:41: restarting wifi on 10.1.0.2 ...
23:25:41: nc on 10.1.0.2:8001: /usr/bin/iperf -s -p 12000; exit
23:25:41: nc on 10.1.0.2:8002: wifi; exit
------------------------------------------------------------
Server listening on TCP port 12000
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
23:26:02: nc on 10.1.0.2:8009: add_monitor; exit
creating monitor interface mon0
23:26:03: == Round 4: round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1
23:26:03: ssh on 10.1.0.1: /etc/init.d/measurement.sh start round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1
starting traces for round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1... done
23:26:07: ssh on 10.1.0.2: /etc/init.d/measurement.sh start round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1
starting traces for round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1... done
23:26:15: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "START_round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:26:20: iperf: starting on AP
23:26:20: nc on 10.1.0.1:8004: touch /tmp/iperf.lock; iperf -c 10.10.0.2 -p 12000 -n 500MB; rm /tmp/iperf.lock; exit
------------------------------------------------------------
Client connecting to 10.10.0.2, TCP port 12000
TCP window size: 43.8 KByte (default)
------------------------------------------------------------
[  5] local 10.10.0.2 port 12000 connected with 10.10.0.1 port 46514
[  4] local 10.10.0.1 port 46514 connected with 10.10.0.2 port 12000
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-356.1 sec   500 MBytes  11.8 Mbits/sec
[ ID] Interval       Transfer     Bandwidth
[  5]  0.0-356.6 sec   500 MBytes  11.8 Mbits/sec
23:32:17: iperf: client done on AP
23:32:17: nc on 10.1.0.1:8003: /usr/sbin/hping3 10.10.0.255 --udp --baseport 8888 --destport 8888 -e "STOP_round=4_proto=tcp_size=1500_data=500MB_cct=1000_run=1" -c 1 --fast 2>/dev/null 1>/dev/null ; exit
23:32:19: ssh on 10.1.0.1: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:32:23: ssh on 10.1.0.2: /etc/init.d/measurement.sh stop
stopping traces for ... done
23:32:27: stopping all iperf instances ...
23:32:27: nc on 10.1.0.2:8007: killall iperf 2>/dev/null; exit
23:32:28: nc on 10.1.0.1:8007: killall iperf 2>/dev/null; exit
23:32:29: collecting traces ...
23:33:11: [ OK ] terminating Attenuator control (27764)
23:33:11: [ OK ] copying attenuator log file to traces
23:33:31: stopping netcat-trace-servers ...
23:33:31: ssh on 10.1.0.1: /etc/init.d/netcat-trace-server stop
Terminating netcat server on port 8000 ...
Terminating netcat server on port 8001 ...
Terminating netcat server on port 8002 ...
Terminating netcat server on port 8003 ...
Terminating netcat server on port 8004 ...
Terminating netcat server on port 8005 ...
Terminating netcat server on port 8006 ...
Terminating netcat server on port 8007 ...
Terminating netcat server on port 8008 ...
Terminating netcat server on port 8009 ...
23:33:35: ssh on 10.1.0.2: /etc/init.d/netcat-trace-server stop
Terminating netcat server on port 8000 ...
Terminating netcat server on port 8001 ...
Terminating netcat server on port 8002 ...
Terminating netcat server on port 8003 ...
Terminating netcat server on port 8004 ...
Terminating netcat server on port 8005 ...
Terminating netcat server on port 8006 ...
Terminating netcat server on port 8007 ...
Terminating netcat server on port 8008 ...
Terminating netcat server on port 8009 ...
23:33:41: collecting traces ...
23:33:48: [ OK ] copying log file to traces
23:33:48: done.
